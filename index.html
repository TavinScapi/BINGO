<!DOCTYPE html>
<html lang="pt-BR">

<head>
<meta charset="UTF-8">
<title>Bingo</title>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    min-height: 100vh;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: linear-gradient(135deg, #1f3c40, #325d62);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
}

.container {
    background: #0f2e32;
    padding: 25px;
    border-radius: 16px;
    display: flex;
    gap: 25px;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    flex-wrap: wrap;
    max-width: 1000px;
    width: 100%;
}

/* TABULEIRO */
.bingo-board {
    flex: 2;
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 6px;
    max-width: 520px;
}

.bingo-cell {
    background: #f5f5f5;
    color: #000;
    border-radius: 6px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    aspect-ratio: 1;
    font-size: 0.95rem;
    transition: all 0.2s ease;
}

/* CABEÃ‡ALHO BINGO */
.bingo-cell.header {
    grid-column: span 2;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: #fff;
    font-size: 1.4rem;
}

/* RODAPÃ‰ 15 / 30 / 45 / 60 / 75 */
.bingo-cell.footer {
    grid-column: span 2;
    background: linear-gradient(135deg, #4caf50, #2e7d32);
    color: #fff;
    font-size: 1.4rem;
}

/* MARCADO */
.bingo-cell.marked {
    background: #ffd700;
    box-shadow: inset 0 0 0 3px #c9a800;
}

/* CONTROLES */
.controls {
    flex: 1;
    min-width: 240px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 15px;
}

.controls h1 {
    margin: 0;
    font-size: 2.2rem;
}

button {
    padding: 12px 22px;
    font-size: 1rem;
    font-weight: bold;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: #fff;
    transition: all 0.2s ease;
    width: 100%;
}

button:hover:not(:disabled) {
    transform: scale(1.05);
}

button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.current {
    font-size: 1.2rem;
}

/* BOLA DO NÃšMERO */
.number-roll {
    height: 120px;
    width: 120px;
    border-radius: 50%;
    background: radial-gradient(circle, #fff, #ddd);
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    font-weight: bold;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
    transition: transform 0.2s ease;
}

.number-roll.active {
    animation: pulse 0.3s infinite alternate;
}

@keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.08); }
}

.historico {
    margin-top: 20px;
    text-align: center;
}

.historico h3 {
    margin-bottom: 10px;
    font-size: 1.1rem;
}

.historico-lista {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}

.historico-item {
    background: #222;
    border: 2px solid #444;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 16px;
    color: #fff;
}

#qrcode {
    margin-top: 20px;
}

@media (max-width: 768px) {
    .container {
        justify-content: center;
    }
}
</style>
</head>

<body>

<div class="container">

    <div class="bingo-board" id="bingo-board"></div>

    <div class="controls">
        <h1>BINGO</h1>

        <button id="draw">ðŸŽ° Sortear NÃºmero</button>

        <div class="number-roll" id="roll">?</div>

        <div class="current" id="current">NÃºmero Atual: -</div>

        <button id="reset">ðŸ”„ Reiniciar</button>

        <div class="historico">
            <h3>Ãšltimos 5 nÃºmeros</h3>
            <div class="historico-lista" id="historico"></div>
        </div>

        <button onclick="gerarQRCode()">Gerar QR Code</button>

        <div id="qrcode"></div>
    </div>

</div>

<script>
const board = document.getElementById('bingo-board');
const rollDisplay = document.getElementById('roll');
const currentDisplay = document.getElementById('current');
const drawBtn = document.getElementById('draw');

const totalNumbers = 75;
const drawn = new Set();
let rolling = false;
const historico = [];

function initializeBoard() {
    board.innerHTML = '';

    const columns = {
        B: [1, 15],
        I: [16, 30],
        N: [31, 45],
        G: [46, 60],
        O: [61, 75]
    };

    /* CABEÃ‡ALHO */
    for (const col in columns) {
        const h = document.createElement('div');
        h.className = 'bingo-cell header';
        h.textContent = col;
        board.appendChild(h);
    }

    /* NÃšMEROS NORMAIS */
    for (let row = 0; row < 7; row++) {
        for (const col in columns) {
            const [start, end] = columns[col];
            const n1 = start + row * 2;
            const n2 = n1 + 1;

            if (n1 < end) createCell(n1);
            if (n2 < end) createCell(n2);
        }
    }

    /* RODAPÃ‰ GRANDE */
    for (const col in columns) {
        const end = columns[col][1];
        const f = document.createElement('div');
        f.className = 'bingo-cell footer';
        f.textContent = end;
        f.id = `cell-${end}`;
        board.appendChild(f);
    }
}

function createCell(number) {
    const cell = document.createElement('div');
    cell.className = 'bingo-cell';
    cell.textContent = number;
    cell.id = `cell-${number}`;
    board.appendChild(cell);
}

function drawNumber() {
    if (rolling || drawn.size === totalNumbers) return;

    rolling = true;
    drawBtn.disabled = true;
    rollDisplay.classList.add('active');

    let number;
    do {
        number = Math.floor(Math.random() * totalNumbers) + 1;
    } while (drawn.has(number));

    animate(number);
}

function animate(finalNumber) {
    let count = 0;

    function spin() {
        rollDisplay.textContent = Math.floor(Math.random() * totalNumbers) + 1;
        count++;

        if (count > 20) {
            finalize(finalNumber);
        } else {
            setTimeout(spin, 60 + count * 8);
        }
    }

    spin();
}

function finalize(number) {
    drawn.add(number);
    rollDisplay.textContent = number;
    currentDisplay.textContent = `NÃºmero Atual: ${number}`;

    const cell = document.getElementById(`cell-${number}`);
    if (cell) cell.classList.add('marked');

    historico.unshift(number);
    if (historico.length > 5) historico.pop();
    atualizarHistorico();

    rollDisplay.classList.remove('active');
    drawBtn.disabled = false;
    rolling = false;
}

function atualizarHistorico() {
    const container = document.getElementById('historico');
    container.innerHTML = '';

    historico.forEach(item => {
        const div = document.createElement('div');
        div.className = 'historico-item';
        div.textContent = item;
        container.appendChild(div);
    });
}

function gerarQRCode() {
    document.getElementById("qrcode").innerHTML = "";

    const id = Math.random().toString(36).substring(2, 10);

    // Substitua 'seu-username' pelo seu username do GitHub
    const url = `https://tavinscapi.github.io/BINGO/cartela.html?id=${id}`;

    new QRCode(document.getElementById("qrcode"), {
        text: url,
        width: 200,
        height: 200
    });
}

document.getElementById('draw').addEventListener('click', drawNumber);

document.getElementById('reset').addEventListener('click', () => {
    drawn.clear();
    document.querySelectorAll('.marked').forEach(c => c.classList.remove('marked'));
    rollDisplay.textContent = '?';
    currentDisplay.textContent = 'NÃºmero Atual: -';
    historico.length = 0;
    atualizarHistorico();
});

initializeBoard();
</script>

</body>
</html>